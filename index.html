<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tenis Game</title>
  <style media="screen">
    body{
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas{
      display: block;
    }
  </style>
</head>
<body>

  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <script type="text/javascript">
    var canvas;
    var canvasContext;
    var ballX = 0;
    var ballY = 0;
    var ballSpeedX = 10;
    var ballSpeedY = 4;

    var paddle1Y = 250;
    const PADDLE_HEIGHT = 100;

    function calculateMousePos(evt) {
      var rect = canvas.getBoundingClientRect();
      var root = document.documentElement;
      var mouseX = evt.clientX - rect.left - root.scrollLeft;
      var mouseY = evt.clientY - rect.top - root.scrollTop;
      return {
        x:mouseX,
        y:mouseY
      };

    }

    window.onload= function() {
      canvas = document.getElementById('gameCanvas');
      canvasContext = canvas.getContext('2d');
      var framePerSecond = 30;
      setInterval(function() {
        drawEverything();
        moveEverything();
      }, 1000/framePerSecond);

      canvas.addEventListener('mousemove', function(evt) {
        var mousePos = calculateMousePos(evt);
        paddle1Y = mousePos.y-(PADDLE_HEIGHT/2);
      })
    }

    function moveEverything() {
      ballX += ballSpeedX;
      ballY += ballSpeedY;
      // ballSpeedX += 1;
      if (ballX > canvas.width) {
        ballSpeedX = -ballSpeedX;
      } else if (ballX < 0) {
        ballSpeedX = -ballSpeedX;
      }
      if (ballY > canvas.height) {
        ballSpeedY = -ballSpeedY;
      } else if (ballY < 0) {
        ballSpeedY = -ballSpeedY;
      }
    }

    function drawEverything() {
      colorRect(0,0,canvas.width,canvas.height,'black'); //table
      colorRect(0,paddle1Y,10,PADDLE_HEIGHT,'cyan'); //user paddle
      colorCircle(ballX,ballY,10,'yellowgreen'); //ball
    }

    function colorCircle(centerX,centerY,radius,drawColor) {
      canvasContext.fillStyle = drawColor;
      canvasContext.beginPath();
      canvasContext.arc(centerX,centerY,radius,0,Math.PI*2,true);
      canvasContext.fill();
    }

    function colorRect(leftX,topY,width,height,drawColor) {
      canvasContext.fillStyle = drawColor;
      canvasContext.fillRect(leftX,topY,width,height);
    }
  </script>
</body>
</html>
